# design

## 0. 目标
- 是模拟设备环境，建立web server
- 实现静态信息的访问
- 实现网页与设备的互动
- 实现网页播放mjpeg视频流
- 调试设备运行



## 1. 实现过程

### 1.0 部署简易服务器

- 服务器选择原则

  - 资源消耗小
  
- 稳定
  
  - 支持长连接
  
- 支持交互（尚未确定使用什么技术，cgi或者其他）
  
  - 接收程度较高，有比较完善的文档和使用案例
  
- c/c++
  
- 选择范围

  | server   | 特点   |      |
  | -------- | ------ | ---- |
  | Lighttpd |        |      |
  | Boa      | 单线程 |      |
  | Thttpd   |        |      |
  | Shttpd   |        |      |

- 选用对象 Lighttpd

  - 部署方法见doc/build/

### 1.2 具体功能的可行性

- 支持页面切换   
- 输入参数 
- 通过cgi修改服务器侧的配置文件 
- 页面读取配置文件中的参数进行显示 （此处可用AJAX实现）
- 返回显示修改结果（此处可用AJAX实现）
- 长时间显示图片流，长连接 
  - 可由客户端循环请求获得，
  - 通过websocket由服务器实时向客户端发送，目前开源的webserver不支持,lighttpd有一个很旧的版本能支持websocket（6年前）
  - 通过网页调用本地插件或程序进行播放